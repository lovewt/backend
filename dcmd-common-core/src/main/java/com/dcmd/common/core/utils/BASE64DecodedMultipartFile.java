package com.dcmd.common.core.utils;


import org.springframework.web.multipart.MultipartFile;
import sun.misc.BASE64Decoder;

import java.io.*;

/**
 * Base64解码成文件
 * Created by 1 on 2018/9/6.
 */
public class BASE64DecodedMultipartFile implements MultipartFile {

    private final byte[] imgContent;
    private final String header;

    /**
     * base64转图片文件
     * @param base64  字符串
     * @return
     */
    public static MultipartFile base64ToMultipart(String base64) {
        try {
            String[] baseStrs = base64.split(",");

            BASE64Decoder decoder = new BASE64Decoder();
            byte[] b = new byte[0];
            b = decoder.decodeBuffer(baseStrs[1]);

            for(int i = 0; i < b.length; ++i) {
                if (b[i] < 0) {
                    b[i] += 256;
                }
            }

            return new BASE64DecodedMultipartFile(b, baseStrs[0]);
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    public static void main(String[] args) {
        MultipartFile file = base64ToMultipart("data:image/jpeg;base64,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");
        System.out.println(file);
    }

    public BASE64DecodedMultipartFile(byte[] imgContent, String header) {
        this.imgContent = imgContent;
        this.header = header.split(";")[0];
    }

    @Override
    public String getName() {
        // TODO - implementation depends on your requirements
        return System.currentTimeMillis() + Math.random() + "." + header.split("/")[1];
    }

    @Override
    public String getOriginalFilename() {
        // TODO - implementation depends on your requirements
        return System.currentTimeMillis() + (int) Math.random() * 10000 + "." + header.split("/")[1];
    }

    @Override
    public String getContentType() {
        // TODO - implementation depends on your requirements
        return header.split(":")[1];
    }

    @Override
    public boolean isEmpty() {
        return imgContent == null || imgContent.length == 0;
    }

    @Override
    public long getSize() {
        return imgContent.length;
    }

    @Override
    public byte[] getBytes() throws IOException {
        return imgContent;
    }

    @Override
    public InputStream getInputStream() throws IOException {
        return new ByteArrayInputStream(imgContent);
    }

    @Override
    public void transferTo(File dest) throws IOException, IllegalStateException {
        new FileOutputStream(dest).write(imgContent);
    }
}
